'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.packeryEvents=void 0;var _vue=require('vue'),_vue2=_interopRequireDefault(_vue),_packery=require('packery'),_packery2=_interopRequireDefault(_packery),_draggabilly=require('draggabilly'),_draggabilly2=_interopRequireDefault(_draggabilly);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ADD='itemAdded',CHANGE='itemChange',REMOVE='itemRemoved',LAYOUT='layout',packeryPlugin=function(){};exports.default=packeryPlugin;var packeryEvents=exports.packeryEvents=new _vue2.default({});function CustomEvent(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent('CustomEvent');return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,packeryPlugin.install=function(a){a.directive('packery',{bind:function j(b,c,d){var e=null;b.packery=new _packery2.default(b,c.value);var f=function(c,d){b.packery&&b.isSameNode(c)&&a.nextTick(function(){if(b.packery.reloadItems(),b.packery.layout(),d&&d.draggable)for(var a=b.packery.getItemElements(),c=0,e=a.length;c<e;c++)!0===d.draggable?g(a[c]):g(a[c],d.draggable)})},g=function(a){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};a.draggabilly&&b.packery.unbindDraggabillyEvents(a.draggabilly);var e=new _draggabilly2.default(a,c);a.draggabilly=e,b.packery.bindDraggabillyEvents(e),e.on('staticClick',function(a){emit(d,'itemClicked',{event:a,element:e.element})})},h=function(a,b){return d.componentInstance?void d.componentInstance.$emit(a,b):void d.elm.dispatchEvent(new CustomEvent(a,b))};b.packery.on('layoutComplete',function(a,b){h('layoutComplete',{event:a,laidOutItems:b})}),b.packery.on('dragItemPositioned',function(a,b){h('dragItemPositioned',{event:a,draggedItem:b})}),b.packery.on('fitComplete',function(a,b){h('fitComplete',{event:a,item:b})});var i=function(a,b){clearTimeout(e),e=setTimeout(function(){f(a,b)},1)};packeryEvents.$on(ADD,function(a,b){i(a,b)}),packeryEvents.$on(CHANGE,function(a,b){i(a,b)}),packeryEvents.$on(REMOVE,function(a,b){i(a,b)}),packeryEvents.$on(LAYOUT,function(a,b){i(a,b)})},unbind:function c(a){var b=setInterval(function(){document.body.contains(a)||(a.packery.destroy(),a.packery=null,clearTimeout(b))},1e3)}}),a.directive('packeryItem',{inserted:function e(a,b,c){a.packeryNode=a.parentNode;var d=Object.assign({vnode:c},b.value);packeryEvents.$emit(ADD,a.packeryNode,d)},componentUpdated:function e(a,b,c){var d=Object.assign({vnode:c},b.value);packeryEvents.$emit(CHANGE,a.packeryNode,d)},unbind:function e(a,b,c){var d=Object.assign({vnode:c},b.value);packeryEvents.$emit(REMOVE,a.packeryNode,d)}})};
